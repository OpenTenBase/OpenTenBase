\c regression_ora
SET client_min_messages = warning;
SET client_encoding = utf8;
-- numeric op all(numeric)
select 'test numeric < all' from dual where 1 < all(2,3,4);
      ?column?      
--------------------
 test numeric < all
(1 row)

select 'test numeric <= all' from dual where 1 <= all(2,3,4);
      ?column?       
---------------------
 test numeric <= all
(1 row)

select 'test numeric <> all' from dual where 1 <> all(2,3,4);
      ?column?       
---------------------
 test numeric <> all
(1 row)

select 'test numeric > all' from dual where 5 > all(2,3,4);
      ?column?      
--------------------
 test numeric > all
(1 row)

select 'test numeric = all' from dual where 1 = all(1,1,1);
      ?column?      
--------------------
 test numeric = all
(1 row)

select 'test numeric >= all' from dual where 4 >= all(2,3,4);
      ?column?       
---------------------
 test numeric >= all
(1 row)

-- numeric op all(str)
select 'test numeric < all' from dual where 1 < all('2','3','4');
      ?column?      
--------------------
 test numeric < all
(1 row)

select 'test numeric <= all' from dual where 1 <= all('2','3','4');
      ?column?       
---------------------
 test numeric <= all
(1 row)

select 'test numeric <> all' from dual where 1 <> all('2','3','4');
      ?column?       
---------------------
 test numeric <> all
(1 row)

select 'test numeric > all' from dual where 5 > all('2','3','4');
      ?column?      
--------------------
 test numeric > all
(1 row)

select 'test numeric = all' from dual where 1 = all('1','1','1');
      ?column?      
--------------------
 test numeric = all
(1 row)

select 'test numeric >= all' from dual where 4 >= all('2','3','4');
      ?column?       
---------------------
 test numeric >= all
(1 row)

-- str op all(str)
select 'test str < all' from dual where '1' < all('2','3','4');
    ?column?    
----------------
 test str < all
(1 row)

select 'test str <= all' from dual where '1' <= all('2','3','4');
    ?column?     
-----------------
 test str <= all
(1 row)

select 'test str <> all' from dual where '1' <> all('2','3','4');
    ?column?     
-----------------
 test str <> all
(1 row)

select 'test str > all' from dual where '5' > all('2','3','4');
    ?column?    
----------------
 test str > all
(1 row)

select 'test str = all' from dual where '1' = all('1','1','1');
    ?column?    
----------------
 test str = all
(1 row)

select 'test str >= all' from dual where '4' >= all('2','3','4');
    ?column?     
-----------------
 test str >= all
(1 row)

-- str op all(numeric)
select 'test str < all' from dual where '1' < all(2,3,4);
    ?column?    
----------------
 test str < all
(1 row)

select 'test str <= all' from dual where '1' <= all(2,3,4);
    ?column?     
-----------------
 test str <= all
(1 row)

select 'test str <> all' from dual where '1' <> all(2,3,4);
    ?column?     
-----------------
 test str <> all
(1 row)

select 'test str > all' from dual where '5' > all(2,3,4);
    ?column?    
----------------
 test str > all
(1 row)

select 'test str = all' from dual where '1' = all(1,1,1);
    ?column?    
----------------
 test str = all
(1 row)

select 'test str >= all' from dual where '4' >= all(2,3,4);
    ?column?     
-----------------
 test str >= all
(1 row)

-- numeric op any(numeric)
select 'test numeric < any' from dual where 1 < any(2,3,4);
      ?column?      
--------------------
 test numeric < any
(1 row)

select 'test numeric <= any' from dual where 1 <= any(2,3,4);
      ?column?       
---------------------
 test numeric <= any
(1 row)

select 'test numeric <> any' from dual where 1 <> any(2,3,4);
      ?column?       
---------------------
 test numeric <> any
(1 row)

select 'test numeric > any' from dual where 5 > any(2,3,4);
      ?column?      
--------------------
 test numeric > any
(1 row)

select 'test numeric = any' from dual where 1 = any(1,1,1);
      ?column?      
--------------------
 test numeric = any
(1 row)

select 'test numeric >= any' from dual where 4 >= any(2,3,4);
      ?column?       
---------------------
 test numeric >= any
(1 row)

-- numeric op any(str)
select 'test numeric < any' from dual where 1 < any('2','3','4');
      ?column?      
--------------------
 test numeric < any
(1 row)

select 'test numeric <= any' from dual where 1 <= any('2','3','4');
      ?column?       
---------------------
 test numeric <= any
(1 row)

select 'test numeric <> any' from dual where 1 <> any('2','3','4');
      ?column?       
---------------------
 test numeric <> any
(1 row)

select 'test numeric > any' from dual where 5 > any('2','3','4');
      ?column?      
--------------------
 test numeric > any
(1 row)

select 'test numeric = any' from dual where 1 = any('1','1','1');
      ?column?      
--------------------
 test numeric = any
(1 row)

select 'test numeric >= any' from dual where 4 >= any('2','3','4');
      ?column?       
---------------------
 test numeric >= any
(1 row)

-- str op any(str)
select 'test str < any' from dual where '1' < any('2','3','4');
    ?column?    
----------------
 test str < any
(1 row)

select 'test str <= any' from dual where '1' <= any('2','3','4');
    ?column?     
-----------------
 test str <= any
(1 row)

select 'test str <> any' from dual where '1' <> any('2','3','4');
    ?column?     
-----------------
 test str <> any
(1 row)

select 'test str > any' from dual where '5' > any('2','3','4');
    ?column?    
----------------
 test str > any
(1 row)

select 'test str = any' from dual where '1' = any('1','1','1');
    ?column?    
----------------
 test str = any
(1 row)

select 'test str >= any' from dual where '4' >= any('2','3','4');
    ?column?     
-----------------
 test str >= any
(1 row)

-- str op any(numeric)
select 'test str < any' from dual where '1' < any(2,3,4);
    ?column?    
----------------
 test str < any
(1 row)

select 'test str <= any' from dual where '1' <= any(2,3,4);
    ?column?     
-----------------
 test str <= any
(1 row)

select 'test str <> any' from dual where '1' <> any(2,3,4);
    ?column?     
-----------------
 test str <> any
(1 row)

select 'test str > any' from dual where '5' > any(2,3,4);
    ?column?    
----------------
 test str > any
(1 row)

select 'test str = any' from dual where '1' = any(1,1,1);
    ?column?    
----------------
 test str = any
(1 row)

select 'test str >= any' from dual where '4' >= any(2,3,4);
    ?column?     
-----------------
 test str >= any
(1 row)

-- all include subquery 
select 1 from dual where 1 <= all('2','3',(select '1' from dual));
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 <= all('2.1','3.2',(select '1.1' from dual));
 ?column? 
----------
        1
(1 row)

-- all include subquery error
select 1 from dual where 1 <= all('a','3.2',(select '1.1' from dual));
ERROR:  invalid input syntax for type numeric: "a"
select 1 from dual where 1 <= all('1','3.2',(select 'a' from dual));
ERROR:  invalid input syntax for type numeric: "a"
-- all include func
select 1 from dual where 1 <= all('1','3.2', to_char('123'));
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 <= all('1','3.2', textlen('123'));
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(ARRAY['5','6'], ARRAY['2','6'], ARRAY['3', '4']);
 ?column? 
----------
        1
(1 row)

select 1 from dual where '1' < all(ARRAY[5,6], ARRAY[2,6], ARRAY[3, 4]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(ARRAY[ARRAY['3', '5'],ARRAY['6','7']], ARRAY[ARRAY['2', '4'],ARRAY['8','9']]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(ARRAY[ARRAY[3, 5],ARRAY[6,7]], ARRAY[ARRAY[2, 4],ARRAY[8,9]]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(array[array[array[array['2', 3]]]], array[array[array[array['4', 5]]]]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(array[array[array[array['2', '3']]]], array[array[array[array['4', '3']]]]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(array[array[array[array[array['2', '3'], array['4', '5']]]]], array[array[array[array[array['4', '5'], array['6', '7']]]]]);
 ?column? 
----------
        1
(1 row)

select 1 from dual where 1 < all(array[array[array[array[array['2', 3], array['4', 5]]]]], array[array[array[array[array['4', 5], array['6', 7]]]]]);
 ?column? 
----------
        1
(1 row)

-- colref op all
drop table if exists t_op_some_any_all;
create table t_op_some_any_all(id int,f1 numeric(4,2));
select * from t_op_some_any_all where f1<>all('1','2','3');
 ID | F1 
----+----
(0 rows)

select * from t_op_some_any_all where id<>all('1','2','3');
 ID | F1 
----+----
(0 rows)

select * from t_op_some_any_all where id<>all('1','2',3);  
 ID | F1 
----+----
(0 rows)

select * from t_op_some_any_all where id<>all(1,2,3); 
 ID | F1 
----+----
(0 rows)

drop table if exists t_op_some_any_all;
-- DONE --
