Parsed test spec with 3 sessions

starting permutation: s1d s2d s1u s2u s3r s1c s2c s3c
step s1d: DECLARE cur1 CURSOR FOR SELECT * FROM books WHERE id = 1 FOR UPDATE;
step s2d: DECLARE cur2 CURSOR FOR SELECT * FROM books WHERE id = 1 FOR UPDATE;
step s1u: UPDATE books SET stock = stock - 2 WHERE id = 1;
step s2u: UPDATE books SET stock = stock - 3 WHERE id = 1; <waiting ...>
step s3r: SELECT * FROM books WHERE id = 1;
id|title |stock
--+------+-----
 1|Book A|   10
(1 row)

step s1c: COMMIT;
step s2u: <... completed>
ERROR:  could not serialize access due to concurrent update
step s2c: COMMIT;
step s3c: COMMIT;
